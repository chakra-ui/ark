---
import { css } from '../../panda/css'
import { Stack } from '../../panda/jsx'
import { Link } from './shared/Link'
import { Text } from './shared/Text'

const pathname = new URL(Astro.request.url).pathname

const allComponents = await Astro.glob('../pages/components/*.mdx')
---

<aside
  role="complementary"
  class={css({
    width: '100%',
    alignSelf: 'start',
    position: { base: 'unset', lg: 'sticky' },
    top: '24',
    maxW: { lg: '300px' },
  })}
>
  <Stack gap="1">
    <Text
      textStyle="xs"
      textTransform="uppercase"
      fontWeight="semibold"
      color="gray.500"
      px="2"
      py="1">Components</Text
    >
    {
      allComponents.map((component) => (
        <Link href={component.url} variant="sidebar">
          {component.frontmatter.title}
        </Link>
      ))
    }
  </Stack>
</aside>
