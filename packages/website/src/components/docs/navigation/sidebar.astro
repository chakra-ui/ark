---
import { Stack } from 'styled-system/jsx'
import { Text } from '~/components/ui/text'
import { getSitemap } from '~/lib/page-control'
import ExternalLinks from './external-links.astro'
import { SidebarGroup } from './sidebar-group'

const sitemap = await getSitemap()
---

<Stack gap="8">
  <ExternalLinks />
  {
    sitemap.map((entry) => (
      <Stack gap="3">
        <Text textStyle={{ base: 'md', md: 'sm' }} fontWeight="semibold" textTransform="capitalize">
          {entry.title}
        </Text>
        <SidebarGroup items={entry.items} client:load transition:persist />
      </Stack>
    ))
  }
</Stack>
